{% extends 'auth/base_auth.html' %}

{% block title %}Đặt Lại Mật Khẩu - TeaZen{% endblock %}

{% block content %}
<div class="absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 z-10 w-full max-w-md px-4">

    <div class="relative bg-[#fff] p-8 md:p-12 shadow-2xl border border-stone-200 -rotate-1 transition-transform duration-300 hover:rotate-0">
        <div class="tape -top-5 left-1/2 -translate-x-1/2 -rotate-1"></div>
        
        <div class="text-center mb-8">
            <div class="w-16 h-16 bg-emerald-100 rounded-full flex items-center justify-center mx-auto mb-4">
                <i data-lucide="lock" class="w-8 h-8 text-emerald-700"></i>
            </div>
            <div class="font-art text-3xl font-bold text-emerald-950 mb-2">Mật Khẩu Mới</div>
            <p class="text-stone-500 text-sm">Nhập mật khẩu mới cho tài khoản</p>
        </div>

        {% if validlink %}
        <form method="post">
            {% csrf_token %}
            
            <div class="input-group">
                <input type="password" name="new_password1" class="input-field hover-trigger" placeholder=" " required>
                <label class="input-label">Mật khẩu mới</label>
            </div>
            
            <div class="input-group">
                <input type="password" name="new_password2" class="input-field hover-trigger" placeholder=" " required>
                <label class="input-label">Xác nhận mật khẩu</label>
            </div>

            <button type="submit" class="hover-trigger w-full bg-emerald-900 text-white font-bold py-4 uppercase tracking-[0.2em] text-xs brutal-btn border-2 border-emerald-950 hover:bg-emerald-800 transition-colors">
                Đặt Lại Mật Khẩu
            </button>
        </form>
        {% else %}
        <div class="text-center py-8">
            <div class="w-16 h-16 bg-red-100 rounded-full flex items-center justify-center mx-auto mb-4">
                <i data-lucide="x" class="w-8 h-8 text-red-500"></i>
            </div>
            <p class="text-stone-600 mb-4">Link đặt lại mật khẩu không hợp lệ hoặc đã hết hạn.</p>
            <a href="{% url 'password_reset' %}" class="text-emerald-900 font-bold hover:underline">Yêu cầu link mới</a>
        </div>
        {% endif %}
    </div>
</div>
{% endblock %}
