{% extends 'admin/base_admin.html' %}

{% block page_title %}Quản Lý Sản Phẩm{% endblock %}
{% block page_subtitle %}{{ products.count }} sản phẩm{% endblock %}

{% block header_actions %}
<a href="{% url 'product_create' %}" class="btn-primary inline-flex items-center gap-2">
    <i data-lucide="plus" class="w-4 h-4"></i> Thêm Sản Phẩm
</a>
{% endblock %}

{% block content %}
<div class="card overflow-hidden">
    <table class="w-full">
        <thead class="bg-stone-50 border-b border-stone-200">
            <tr>
                <th class="text-left px-6 py-4 text-xs font-semibold text-stone-500 uppercase tracking-wider">Sản Phẩm</th>
                <th class="text-left px-6 py-4 text-xs font-semibold text-stone-500 uppercase tracking-wider">Slug</th>
                <th class="text-left px-6 py-4 text-xs font-semibold text-stone-500 uppercase tracking-wider">Giá</th>
                <th class="text-left px-6 py-4 text-xs font-semibold text-stone-500 uppercase tracking-wider">Ngày tạo</th>
                <th class="text-right px-6 py-4 text-xs font-semibold text-stone-500 uppercase tracking-wider">Thao tác</th>
            </tr>
        </thead>
        <tbody class="divide-y divide-stone-100">
            {% for product in products %}
            <tr class="hover:bg-stone-50 transition-colors">
                <td class="px-6 py-4">
                    <div class="flex items-center gap-4">
                        <div class="w-14 h-14 bg-stone-200 rounded-xl overflow-hidden flex-shrink-0">
                            {% if product.image %}
                            <img src="{{ product.image.url }}" class="w-full h-full object-cover">
                            {% else %}
                            <div class="w-full h-full flex items-center justify-center text-stone-400"><i data-lucide="image" class="w-6 h-6"></i></div>
                            {% endif %}
                        </div>
                        <div>
                            <p class="font-semibold text-stone-800">{{ product.title }}</p>
                            <p class="text-sm text-stone-500 truncate max-w-xs">{{ product.excerpt }}</p>
                        </div>
                    </div>
                </td>
                <td class="px-6 py-4">
                    <code class="text-sm bg-stone-100 px-2 py-1 rounded">{{ product.slug }}</code>
                </td>
                <td class="px-6 py-4">
                    {% if product.price %}
                    <span class="font-semibold text-emerald-600">{{ product.price }}₫</span>
                    {% else %}
                    <span class="text-stone-400">—</span>
                    {% endif %}
                </td>
                <td class="px-6 py-4 text-sm text-stone-500">
                    {{ product.created_at|date:"d/m/Y" }}
                </td>
                <td class="px-6 py-4">
                    <div class="flex justify-end gap-2">
                        <a href="{% url 'product_edit' product.pk %}" class="p-2 text-stone-400 hover:text-emerald-600 hover:bg-emerald-50 rounded-lg transition-all" title="Sửa">
                            <i data-lucide="edit-2" class="w-4 h-4"></i>
                        </a>
                        <a href="{% url 'product_delete' product.pk %}" class="p-2 text-stone-400 hover:text-red-600 hover:bg-red-50 rounded-lg transition-all" title="Xóa">
                            <i data-lucide="trash-2" class="w-4 h-4"></i>
                        </a>
                    </div>
                </td>
            </tr>
            {% empty %}
            <tr>
                <td colspan="5" class="px-6 py-12 text-center text-stone-500">
                    <i data-lucide="package" class="w-12 h-12 mx-auto mb-4 text-stone-300"></i>
                    <p>Chưa có sản phẩm nào</p>
                    <a href="{% url 'product_create' %}" class="text-emerald-600 hover:underline mt-2 inline-block">Thêm sản phẩm đầu tiên →</a>
                </td>
            </tr>
            {% endfor %}
        </tbody>
    </table>
</div>
{% endblock %}
